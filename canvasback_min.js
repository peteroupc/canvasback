function ca(a){function b(){a();x(b)}a();x(b)}function y(a){return a&&"compileShader"in a}function x(a){var b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;b?b(a):window.setTimeout(a,17)}
function F(a,b,c){var h=G.J,e=a.createBuffer(),d=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,e);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d);a.bufferData(a.ARRAY_BUFFER,new Float32Array(b),a.STATIC_DRAW);var f=a.UNSIGNED_SHORT;65536<=b.length||65536<=c.length?(f=a.UNSIGNED_INT,a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint32Array(c),a.STATIC_DRAW)):256>=b.length&&256>=c.length?(f=a.UNSIGNED_BYTE,a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint8Array(c),a.STATIC_DRAW)):a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),
a.STATIC_DRAW);return{Y:e,O:d,P:c.length,type:f,format:h}}
function da(a,b){for(var c=0;c<a.length;c+=8)a[c+3]=0,a[c+4]=0,a[c+5]=0;for(c=0;c<a.length;c+=3){var h=8*b[c],e=8*b[c+1],d=8*b[c+2],f=[a[e]-a[d],a[e+1]-a[d+1],a[e+2]-a[d+2]],g=[a[h]-a[d],a[h+1]-a[d+1],a[h+2]-a[d+2]],l=f[1]*g[2]-f[2]*g[1],k=f[2]*g[0]-f[0]*g[2],f=f[0]*g[1]-f[1]*g[0];len=Math.sqrt(l*l+k*k+f*f);0!=len&&(len=1/len,l*=len,k*=len,f*=len,a[h+3]+=l,a[h+4]+=k,a[h+5]+=f,a[e+3]+=l,a[e+4]+=k,a[e+5]+=f,a[d+3]+=l,a[d+4]+=k,a[d+5]+=f)}for(c=0;c<a.length;c+=8)if(l=a[c+3],k=a[c+4],f=a[c+5],len=Math.sqrt(l*
l+k*k+f*f))len=1/len,a[c+3]=l*len,a[c+4]=k*len,a[c+5]=f*len}
function ea(a){var b,c;function h(a,b,c){b=H([.5*(a[b]+a[c]),.5*(a[b+1]+a[c+1]),.5*(a[b+2]+a[c+2])]);a.push(b[0],b[1],b[2],0,0,0,0,0)}function e(a,b,c,d,h,e){var f,g=8*b[c+d],k=8*b[c+h],l=8*b[c+e];f=.5*(a[k+6]+a[l+6]);if(.5<Math.abs(a[k+6]-a[l+6])){var m=(f=a[k+6]<a[l+6]?!0:!1)?k:l,n=a[m+6]+1;b[c+(f?h:e)]=a.length/8;a.push(a[m],a[m+1],a[m+2],0,0,0,n,a[m+7]);f=f?n+a[l+6]:n+a[k+6];f/=2}b[c+d]=a.length/8;a.push(a[g],a[g+1],a[g+2],0,0,0,f,a[g+7])}"undefined"==typeof b&&(b=1);"undefined"==typeof div&&
(c=6);for(var d=[.5773502691896258,.5773502691896258,.5773502691896258,0,0,0,0,0,-.5773502691896258,-.5773502691896258,.5773502691896258,0,0,0,0,0,-.5773502691896258,.5773502691896258,-.5773502691896258,0,0,0,0,0,.5773502691896258,-.5773502691896258,-.5773502691896258,0,0,0,0,0],f=[0,1,3,0,2,1,3,2,0,2,3,1],g=0;g<c;g++)for(var l=f.length,k=0;k<l;k+=3){var m=f[k],u=f[k+1],w=f[k+2],p=8*m,q=8*u,n=8*w,t=d.length/8;h(d,p,q);h(d,q,n);h(d,n,p);f[k]=t;f[k+1]=t+1;f[k+2]=t+2;f.push(m,t,t+2,u,t+1,t,w,t+2,t+1)}for(g=
0;g<d.length;g+=8)d[g+6]=1-(.5+Math.atan2(d[g],d[g+2])/(2*Math.PI)),d[g+7]=1-Math.acos(d[g+1])/Math.PI;for(k=0;k<f.length;k+=3)p=8*f[k],q=8*f[k+1],n=8*f[k+2],0==d[p]&&0==d[p+2]?e(d,f,k,0,1,2):0==d[q]&&0==d[q+2]?e(d,f,k,1,0,2):0==d[n]&&0==d[n+2]?e(d,f,k,2,0,1):(g=d[p+6],l=d[q+6],m=d[n+6],c=g<l?g<m?p:n:l<m?q:n,g=g>l?g>m?p:n:l>m?q:n,n=p==c||p==g?q==c||q==g?n:q:p,.5<d[g+6]-d[c+6]&&(l=d.length/8,d.push(d[c],d[c+1],d[c+2],0,0,0,d[c+6]+1,d[c+7]),p==c?f[k]=l:q==c?f[k+1]=l:f[k+2]=l,farEnd=8*l,.5<d[g+6]-d[n+
6]&&(l=d.length/8,d.push(d[n],d[n+1],d[n+2],0,0,0,d[n+6]+1,d[n+7]),p==n?f[k]=l:q==n?f[k+1]=l:f[k+2]=l,midEnd=8*l)));if(1!=b)for(g=0;g<d.length;g+=8)d[g]*=b,d[g+1]*=b,d[g+2]*=b;da(d,f);return F(a,d,f)}function H(a){var b=a[0],c=a[1],h=a[2];len=Math.sqrt(b*b+c*c+h*h);0!=len&&(len=1/len,a[0]*=len,a[1]*=len,a[2]*=len);return a}function I(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}
function J(a,b,c){null==b&&(b="attribute vec3 position;\nattribute vec3 normal;\nattribute vec2 textureUV;\nuniform mat4 world;\nuniform mat4 view;\nuniform mat4 viewInverse; /* internal */\nuniform mat3 modelInverseTrans3; /* internal */\nuniform mat4 projection;\nuniform float alpha;\nuniform vec4 lightPosition;\nuniform vec3 sa;\nuniform vec3 ma;\nuniform vec3 sd;\nuniform vec3 md;\nuniform vec3 ss;\nuniform vec3 ms;\nuniform float mshin;\nvarying vec2 textureUVVar;\nvarying vec3 ambientAndSpecularVar;\nvarying vec3 diffuseVar;\nvoid main(){\nvec4 positionVec4=vec4(position,1.0);\nvec4 worldPosition=world*positionVec4;\nvec3 sdir;\nfloat attenuation;\nif(lightPosition.w == 0.0){\n sdir=normalize(vec3(lightPosition));\n attenuation=1.0;\n} else {\n vec3 vertexToLight=vec3(lightPosition-worldPosition);\n float dist=length(vertexToLight);\n sdir=normalize(vertexToLight);\n attenuation=1.0/(1.0*dist);\n}\nvec3 transformedNormal=normalize(modelInverseTrans3*normal);\nvec3 ambientAndSpecular=sa*ma;\nfloat diffInt=dot(transformedNormal,sdir);vec3 viewPosition=normalize(vec3(viewInverse*vec4(0,0,0,1)-worldPosition));\nif(diffInt>=0.0){\n   // specular reflection\n   ambientAndSpecular+=(ss*ms*pow(max(dot(reflect(-sdir,transformedNormal),      viewPosition),0.0),mshin));\n}\ndiffuseVar=sd*md*max(0.0,dot(transformedNormal,sdir))*attenuation;\nambientAndSpecularVar=ambientAndSpecular;\ntextureUVVar=textureUV;\ngl_Position=projection*view*world*positionVec4;\n}");null==
c&&(c="precision highp float;\nuniform sampler2D sampler;\nuniform int useTexture;\nuniform vec4 color;\nvarying vec2 textureUVVar;\nvarying vec3 ambientAndSpecularVar;\nvarying vec3 diffuseVar;\nvoid main(){\n vec4 baseColor=(useTexture==0) ? color : texture2D(sampler,textureUVVar);\n vec3 phong=ambientAndSpecularVar+diffuseVar*baseColor.rgb;\n gl_FragColor=vec4(phong,baseColor.a);\n}");this.c=fa(a,b,c);this.attributes={};this.a=a;this.q={};this.H={};if(null!=this.c){this.attributes=[];var h=null;
b={};c=a.getProgramParameter(this.c,a.ACTIVE_ATTRIBUTES);for(var e=0;e<c;++e)if(h=a.getActiveAttrib(this.c,e),null!==h){var h=h.name,d=a.getAttribLocation(this.c,h);0<=d&&(this.attributes.push(d),b[h]=d)}c=a.getProgramParameter(this.c,a.ACTIVE_UNIFORMS);for(e=0;e<c;++e)d=a.getActiveUniform(this.c,e),null!==d&&(h=d.name,b[h]=a.getUniformLocation(this.c,h),this.H[h]=d.type);this.q=b}}J.prototype.get=function(a){return this.q.hasOwnProperty(a)?this.q[a]:null};
function K(a,b){for(var c in b)b.hasOwnProperty(c)&&(v=b[c],3==v.length?a.a.uniform3f(a.get(c),v[0],v[1],v[2]):4==v.length?a.a.uniform4f(a.get(c),v[0],v[1],v[2],v[3]):16==v.length?a.a.uniformMatrix4fv(a.get(c),!1,v):a.H[c]==a.a.FLOAT?a.a.uniform1f(a.get(c),"number"==typeof v?v:v[0]):a.a.uniform1i(a.get(c),"number"==typeof v?v:v[0]))}
function fa(a,b,c){function h(a,b,c){var h=a.createShader(b);a.shaderSource(h,c);a.compileShader(h);return a.getShaderParameter(h,a.COMPILE_STATUS)?h:(console.log((b==a.VERTEX_SHADER?"vertex: ":"fragment: ")+a.getShaderInfoLog(h)),null)}b=b&&0!=b.length?h(a,a.VERTEX_SHADER,b):null;c=c&&0!=c.length?h(a,a.FRAGMENT_SHADER,c):null;var e=null;null!==b&&null!==c&&(e=a.createProgram(),a.attachShader(e,b),a.attachShader(e,c),a.linkProgram(e),a.getProgramParameter(e,a.LINK_STATUS)?a.useProgram(e):(console.log("link: "+
a.getProgramInfoLog(e)),a.deleteProgram(e),e=null));null!==b&&a.deleteShader(b);null!==c&&a.deleteShader(c);return e}J.prototype.l=function(a){if(!a)return this;K(this,{lightPosition:a.position,sd:a.s,ss:a.A});return this};function L(a,b){b&&K(a,{mshin:b.W,ma:b.g,md:b.s,ms:b.A})}function M(a,b,c,h){this.W=null==h?1:Math.max(1,h);this.g=a||[.2,.2,.2];this.s=b||[1,1,1];this.A=c||[.2,.2,.2]}function T(a,b,c){this.position=a?[a[0],a[1],a[2],1]:[0,1,2,1];this.s=b||[1,1,1];this.A=c||[.2,.2,.2]}
(function(){function a(a,h){this.kind=b.I;this.h=null;this.color=[h[0],h[1],h[2],null==h[3]?1:h[3]];this.a=a}function b(a,b){this.a=a;b.get("color");this.U=b.get("sampler");b.get("useTexture");this.a.uniform1i(this.U,0)}b.I=0;b.TEXTURE=1;b.prototype.t=function(b,h,e){return"number"==typeof b&&"number"==typeof h&&"number"==typeof e?new a(this.a,[b,h,e]):new a(this.a,b)};a.prototype.V=function(a){this.h=a;return this};a.prototype.bind=function(a){var b=a.get("useTexture");null!==b&&this.a.uniform1i(b,
0);this.a.uniform4f(a.get("color"),this.color[0],this.color[1],this.color[2],this.color[3]);L(a,this.h)};window.Materials=b})(window);
function U(a){this.a=a;this.a.viewport(0,0,1*this.a.canvas.width,1*this.a.canvas.height);this.c=new J(a);this.i=[];this.clearColor=[0,0,0,0];this.S=new Materials(a,this.c);this.a.enable(a.BLEND);this.p=this.F=null;this.d=!1;this.g=this.D=this.n=null;this.a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);a=V(this,I());a.p=I().slice(0,16);a.d=!0;a=a.l(new T);a.g=[.2,.2,.2,1];K(a.c,{sa:[a.g[0],a.g[1],a.g[2]]});L(this.c,new M);this.a.enable(this.a.DEPTH_TEST);this.a.depthFunc(this.a.LEQUAL);this.a.clearColor(0,
0,0,1);this.a.clearDepth(999999);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT)}U.prototype.t=function(a,b,c,h){return this.S.t(a,b,c,h)};
U.prototype.o=function(){if(this.d){var a;var b=this.p,c=b[0]*b[10],h=b[0]*b[11],e=b[0]*b[5],d=b[0]*b[6],f=b[0]*b[7],g=b[0]*b[9],l=b[10]*b[12],k=b[10]*b[13],m=b[10]*b[15],u=b[11]*b[12],w=b[11]*b[13],p=b[11]*b[14],q=b[1]*b[4],n=b[1]*b[6],t=b[1]*b[7],N=b[1]*b[8],z=b[2]*b[4],A=b[2]*b[5],B=b[2]*b[7],O=b[2]*b[8],P=b[2]*b[9],C=b[3]*b[4],D=b[3]*b[5],E=b[3]*b[6],Q=b[3]*b[8],R=b[3]*b[9],S=b[4]*b[9],X=b[5]*b[8],Y=b[6]*b[8],Z=b[6]*b[9],aa=b[7]*b[8],ba=b[7]*b[9];a=b[9]*b[12]*(E-B)+l*(-D+t)+u*(A-n)+b[8]*b[13]*
(-E+B)+k*(C-f)+w*(-z+d)+b[8]*b[14]*(D-t)+b[9]*b[14]*(-C+f)+p*(q-e)+b[8]*b[15]*(-A+n)+b[9]*b[15]*(z-d)+m*(-q+e);if(0==a)a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];else{a=1/a;var r=[];r[0]=b[6]*w-b[7]*k+ba*b[14]-b[5]*p-Z*b[15]+b[5]*m;r[1]=b[3]*k-b[2]*w-R*b[14]+b[1]*p+P*b[15]-b[1]*m;r[2]=b[13]*(B-E)+b[14]*(D-t)+b[15]*(-A+n);r[3]=b[9]*(E-B)+b[10]*(-D+t)+b[11]*(A-n);r[4]=b[7]*l-b[6]*u-aa*b[14]+b[4]*p+Y*b[15]-b[4]*m;r[5]=b[2]*u-b[3]*l+b[14]*(Q-h)+b[15]*(-O+c);r[6]=b[12]*(E-B)+b[14]*(-C+f)+b[15]*(z-d);r[7]=b[8]*
(B-E)+b[10]*(C-f)+b[11]*(-z+d);r[8]=b[5]*u-ba*b[12]+aa*b[13]-b[4]*w+b[15]*(-X+S);r[9]=R*b[12]-b[1]*u+b[13]*(-Q+h)+b[15]*(N-g);r[10]=b[12]*(t-D)+b[13]*(C-f)+b[15]*(-q+e);r[11]=b[8]*(D-t)+b[9]*(-C+f)+b[11]*(q-e);r[12]=Z*b[12]-b[5]*l-Y*b[13]+b[4]*k+b[14]*(X-S);r[13]=b[1]*l-P*b[12]+b[13]*(O-c)+b[14]*(-N+g);r[14]=b[12]*(A-n)+b[13]*(-z+d)+b[14]*(q-e);r[15]=b[8]*(n-A)+b[9]*(z-d)+b[10]*(-q+e);for(b=0;16>b;b++)r[b]*=a;a=r}this.D=a;K(this.c,{view:this.p,projection:this.F,viewInverse:this.D});this.d=!1}};
function V(a,b){a.F=b.slice(0,16);a.d=!0;return a}U.prototype.l=function(a){this.c.l(a);return this};U.prototype.w=function(){this.o();this.a.clear(this.a.COLOR_BUFFER_BIT);for(var a=0;a<this.i.length;a++)this.i[a].w(this.c);this.a.flush()};function G(a,b){this.C=b;this.a=a;this.h=null;this.scale=[1,1,1];this.f=0;this.position=[0,0,0];this.B=[0,0,0];this.d=!1;this.n=[1,0,0,0,1,0,0,0,1];this.e=I()}
function W(a,b,c,h,e,d){null!==b&&(a.enableVertexAttribArray(b),a.vertexAttribPointer(b,c,h,!1,e,d))}
G.prototype.o=function(){this.d=!1;var a=this.scale;this.e=[a[0],0,0,0,0,a[1],0,0,0,0,a[2],0,0,0,0,1];if(0!=this.f){var a=this.e,b=this.f,c=this.B,c=[c[0],c[1],c[2]];H(c);var b=b*Math.PI/180,h=Math.cos(b),e=Math.sin(b),d=1-h,f=c[0]*d,b=c[1]*d,d=c[2]*d,g=c[0]*e,l=c[1]*e,k=c[2]*e,e=c[0]*f+h,m=c[0]*b-k,u=c[0]*d+l,k=c[1]*f+k,w=c[1]*b+h,p=c[1]*d-g,f=c[2]*f-l,b=c[2]*b+g,c=c[2]*d+h;this.e=[a[0]*e+a[4]*m+a[8]*u,a[1]*e+a[5]*m+a[9]*u,a[2]*e+a[6]*m+a[10]*u,a[3]*e+a[7]*m+a[11]*u,a[0]*k+a[4]*w+a[8]*p,a[1]*k+a[5]*
w+a[9]*p,a[2]*k+a[6]*w+a[10]*p,a[3]*k+a[7]*w+a[11]*p,a[0]*f+a[4]*b+a[8]*c,a[1]*f+a[5]*b+a[9]*c,a[2]*f+a[6]*b+a[10]*c,a[3]*f+a[7]*b+a[11]*c,a[12],a[13],a[14],a[15]]}this.e[12]+=this.position[0];this.e[13]+=this.position[1];this.e[14]+=this.position[2];a=this.e;a=[a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]];c=a[0]*a[4]*a[8]+a[3]*a[7]*a[2]+a[6]*a[1]*a[5]-a[6]*a[4]*a[2]-a[3]*a[1]*a[8]-a[0]*a[7]*a[5];0==c?a=[1,0,0,0,1,0,0,0,1]:(c=1/c,a=[(-a[5]*a[7]+a[4]*a[8])*c,(a[2]*a[7]-a[1]*a[8])*c,(-a[2]*a[4]+a[1]*
a[5])*c,(a[5]*a[6]-a[3]*a[8])*c,(-a[2]*a[6]+a[0]*a[8])*c,(a[2]*a[3]-a[0]*a[5])*c,(-a[4]*a[6]+a[3]*a[7])*c,(a[1]*a[6]-a[0]*a[7])*c,(-a[1]*a[3]+a[0]*a[4])*c]);this.n=a};G.prototype.rotate=function(a,b){this.f+=a;this.f%=360;this.B=b;this.d=!0;return this};
G.prototype.w=function(a){var b=this.a,c=this.C,h=a.get("position"),e=a.get("normal"),d=a.get("textureUV");b.bindBuffer(b.ARRAY_BUFFER,c.Y);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.O);c=c.format;5==c?(W(b,h,3,b.FLOAT,24,0),W(b,e,3,b.FLOAT,24,12)):c==G.J?(W(b,h,3,b.FLOAT,32,0),W(b,e,3,b.FLOAT,32,12),W(b,d,2,b.FLOAT,32,24)):2==c?W(b,h,2,b.FLOAT,8,0):3==c&&W(b,h,3,b.FLOAT,12,0);this.h&&this.h.bind(a);b=a.get("world");null!==b&&(this.d&&this.o(),this.a.uniformMatrix4fv(b,!1,this.e),this.a.uniformMatrix3fv(a.get("modelInverseTrans3"),
!1,this.n));this.a.drawElements(this.a.TRIANGLES,this.C.P,this.C.type,0)};
(function(a){function b(a){a=a||"#ff0000";this.height=this.width=1E3;var b=$("<canvas>").attr("width",this.width+"").attr("height",this.height+"").css({width:"100%",height:"100%",left:"0px",zIndex:-1,top:"0px",position:"fixed"});$("body").append(b);this.m=!0;this.count=0;if(b=b.get(0)){var e=null,d={antialias:!0};try{e=b.getContext("webgl",d)}catch(f){e=null}if(!e)try{e=b.getContext("experimental-webgl",d)}catch(g){e=null}if(!e)try{e=b.getContext("moz-webgl",d)}catch(l){e=null}if(!e)try{e=b.getContext("webkit-3d",
d)}catch(k){e=null}if(!e)try{e=b.getContext("2d",d)}catch(m){e=null}y(e)&&(e.getExtension("OES_element_index_uint"),e.getExtension("EXT_texture_filter_anisotropic"));b=e}else b=null;this.a=b;this.m=y(this.a);this.i=[];this.setColor(a)}b.X=function(a){var h=a[0]-7.5+b.b(15);360<=h?h=360-h:0>h&&(h=360+h);var e=a[1],e=15>=e?b.b(30):240<e?240+b.b(30):e-15+b.b(30),d=a=a[2],d=15>=d?b.b(30):240<d?240+b.b(30):d+b.b(30);0<a&&0<e&&255>e&&(25>=e&&(e=25),242<=e&&(e=242));return[h,e,d]};b.b=function(a){return Math.random()*
a|0};b.T=function(a){var b=a[0],e=a[1];a=a[2];var d=b;e>d&&(d=e);a>d&&(d=a);var f=b;e<f&&(f=e);a<f&&(f=a);var g=d+f,l=g/2;if(d===f)return[0,0>l?0:255<l?255:l,0];var f=d-f,g=255*f/(127.5>=l?g:510-g),k=0,k=f/2,k=b===d?(60*(d-a)+k)/f-(60*(d-e)+k)/f:a===d?240+(60*(d-e)+k)/f-(60*(d-b)+k)/f:120+(60*(d-b)+k)/f-(60*(d-a)+k)/f;if(0>k||360<=k)k=(k%360+360)%360;return[k,0>l?0:255<l?255:l,0>g?0:255<g?255:g]};b.v=function(a){var b=1*a[0],e=1*a[1],d=1*a[2],e=0>e?0:255<e?255:e,d=0>d?0:255<d?255:d;if(0===d)return[e,
e,e];a=0;127.5>=e?a=e*(255+d)/255:(a=e*d/255,a=e+d-a);var f=2*e-a;if(0>b||360<=b)b=(b%360+360)%360;var g=b+120;360<=g&&(g-=360);e=60>g?f+(a-f)*g/60:180>g?a:240>g?f+(a-f)*(240-g)/60:f;g=b;d=60>g?f+(a-f)*g/60:180>g?a:240>g?f+(a-f)*(240-g)/60:f;g=b-120;0>g&&(g+=360);b=60>g?f+(a-f)*g/60:180>g?a:240>g?f+(a-f)*(240-g)/60:f;return[0>e?0:255<e?255:e,0>d?0:255<d?255:d,0>b?0:255<b?255:b]};b.r=function(a){a="0"+(a|0).toString(16);return a.substring(a.length-2,a.length)};b.u=function(a){a=b.v(a);return"#"+b.r(a[0])+
b.r(a[1])+b.r(a[2])};b.Q=function(a){return null==a||"undefined"==typeof a?null:(a=/^\#([A-F0-9]{2})([A-F0-9]{2})([A-F0-9]{2})$/i.exec(a))?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:null};b.prototype.start=function(){ca(this.K.bind(this))};b.prototype.setColor=function(a){a=this.constructor.Q(a);if(!a)throw Error("invalid color parameter");this.color=a;this.j=this.constructor.T(a);this.M()};b.prototype.M=function(){document.body.style.backgroundColor=this.constructor.u(this.j);if(this.m){var a=
this.constructor.v(this.j),b=new T([0,0,-1],[.2,.2,.2],[1,1,1]);this.R=new M([1,1,1],[1,1,1],[1,1,1],0);this.L=F(this.a,[-1,-1,1,1,0,0,1,1,-1,1,1,1,0,0,1,0,-1,1,-1,1,0,0,0,0,-1,-1,-1,1,0,0,0,1,1,-1,-1,-1,0,0,1,1,1,1,-1,-1,0,0,1,0,1,1,1,-1,0,0,0,0,1,-1,1,-1,0,0,0,1,1,-1,-1,0,1,0,1,1,1,-1,1,0,1,0,1,0,-1,-1,1,0,1,0,0,0,-1,-1,-1,0,1,0,0,1,1,1,1,0,-1,0,1,1,1,1,-1,0,-1,0,1,0,-1,1,-1,0,-1,0,0,0,-1,1,1,0,-1,0,0,1,-1,-1,-1,0,0,1,1,1,-1,1,-1,0,0,1,1,0,1,1,-1,0,0,1,0,0,1,-1,-1,0,0,1,0,1,1,-1,1,0,0,-1,1,1,1,
1,1,0,0,-1,1,0,-1,1,1,0,0,-1,0,0,-1,-1,1,0,0,-1,0,1],[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]);this.G=ea(this.a);b=V(new U(this.a),[-1,0,0,0,0,1,0,0,0,0,-.2,0,-0,0,0,1]).l(b);b.a.clearColor(a[0]/255,a[1]/255,a[2]/255,1);this.k=b}else this.a.fillStyle=this.constructor.u(this.j),this.a.fillRect(0,0,this.width,this.height)};b.prototype.K=function(){this.count++;4<=this.count&&(this.count=0,this.N());this.m&&this.k.w()};b.prototype.N=function(){var a=
this.constructor.X(this.j);if(this.m){300<this.i.length&&this.k.i.shift();var b=this.constructor.b(2E3)/1E3-1,e=this.constructor.b(2E3)/1E3-1,d=this.constructor.b(60)/60,f=0==this.constructor.b(2)?this.L:this.G,g=(16+this.constructor.b(100))/1E3,l=this.constructor.v(a);l[0]/=255;l[1]/=255;l[2]/=255;var a=this.constructor.b(160),k=H([this.constructor.b(360)/360,this.constructor.b(360)/360,this.constructor.b(360)/360]),m=new G(this.a,f);m.scale=[g,g,g];m.d=!0;g=this.k.t(l).V(this.R);if(f!=this.G||g.kind==
Materials.TEXTURE)m.f=a%360,m.B=k,m.d=!0;m.position=[b,e,d];m.d=!0;m.h=g;this.k.i.push(m)}else b=[this.constructor.b(this.width+30)-30,this.constructor.b(this.height+30)-30,32+this.constructor.b(200),32+this.constructor.b(200)],this.a.fillStyle=this.constructor.u(a),this.a.fillRect(b[0],b[1],b[2],b[3])};b.colorBackground=function(a){$(document).ready(function(){(new b(a)).start()})};a.CanvasBackground=b})(this);
