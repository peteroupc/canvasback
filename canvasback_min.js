(function(m){function g(a){a=a||"#ff0000";this.height=this.width=1E3;var b=$("<canvas>").attr("width",this.width+"").attr("height",this.height+"").css({width:"100%",height:"100%",left:"0px",zIndex:-1,top:"0px",position:"fixed"});$("body").append(b);this.j=!0;b=b.get(0);this.a=k.s(b);this.j=k.W(this.a);this.i=[];this.ca(a)}function l(a,b){this.p=b;this.a=a;this.scale=[1,1,1];this.f=0;this.position=[0,0,0];this.u=[0,0,0];this.c=[];this.e=!1;this.d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}var k={V:function(a,
b,c,d,e,f,n){a.viewport(0,0,1*a.canvas.width,1*a.canvas.height);a.enable(a.DEPTH_TEST);a.depthFunc(n);a.clearColor(b,c,d,"undefined"==typeof e?1:e);a.clearDepth(f);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},s:function(a){if(!a)return null;var b=null;try{b=a.getContext("webgl",{antialias:!0,g:!0})}catch(c){b=null}if(!b)try{b=a.getContext("experimental-webgl",{antialias:!0,g:!0})}catch(d){b=null}if(!b)try{b=a.getContext("moz-webgl",{antialias:!0,g:!0})}catch(e){b=null}if(!b)try{b=a.getContext("webkit-3d",
{antialias:!0,g:!0})}catch(f){b=null}if(!b)try{b=a.getContext("2d",{antialias:!0,g:!0})}catch(n){b=null}return b},la:function(a,b){if(!a)return null;var c=a.s(a),d=null;!c&&m.WebGLShader?d="Failed to initialize graphics support required by this page.":m.WebGLShader&&!is3DContext(c)?d="This page requires WebGL, but it failed to start. Your computer might not support WebGL.":c&&is3DContext(c)||(d="This page requires a WebGL-supporting browser.");return d?((b||m.alert)(d),null):context},W:function(a){return a&&
"compileShader"in a},aa:function(a,b,c,d,e){for(var f=0;f<b.length;f++)b[f].$(c,d,e);a.flush()},ga:function(a,b,c){for(var d in c)c.hasOwnProperty(d)&&(v=c[d],3==v.length?a.uniform3f(b[d],v[0],v[1],v[2]):16==v.length?a.uniformMatrix4fv(b[d],!1,v):a.uniform1f(b[d],v[0]))},N:function(a,b,c,d){var e=a.createBuffer(),f=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,e);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f);a.bufferData(a.ARRAY_BUFFER,new Float32Array(b),a.STATIC_DRAW);var n=a.UNSIGNED_SHORT;65536<=b.length||
65536<=c.length?(n=a.UNSIGNED_INT,a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint32Array(c),a.STATIC_DRAW)):a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),a.STATIC_DRAW);return{ka:e,R:f,S:c.length,type:n,format:d}},L:function(a,b,c){function d(a,b,c){var d=a.createShader(b);a.shaderSource(d,c);a.compileShader(d);return a.getShaderParameter(d,a.COMPILE_STATUS)?d:(console.log((b==a.VERTEX_SHADER?"vertex: ":"fragment: ")+a.getShaderInfoLog(d)),null)}b=b&&0!=b.length?d(a,a.VERTEX_SHADER,b):null;
c=c&&0!=c.length?d(a,a.FRAGMENT_SHADER,c):null;var e=null;null!==b&&null!==c&&(e=a.createProgram(),a.attachShader(e,b),a.attachShader(e,c),a.linkProgram(e),a.getProgramParameter(e,a.LINK_STATUS)?a.useProgram(e):(console.log("link: "+a.getProgramInfoLog(e)),a.deleteProgram(e),e=null));null!==b&&a.deleteShader(b);null!==c&&a.deleteShader(c);return e},T:function(a,b){var c=null,d={};if(null!=b){for(var e=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),f=0;f<e;++f)c=a.getActiveAttrib(b,f).name,d[c]=a.getAttribLocation(b,
c),null!==d[c]&&a.enableVertexAttribArray(d[c]);e=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(f=0;f<e;++f)c=a.getActiveUniform(b,f).name,d[c]=a.getUniformLocation(b,c)}return d},M:function(a){return k.N(a,[-1,-1,1,-1,0,0,-1,1,1,-1,0,0,-1,1,-1,-1,0,0,-1,-1,-1,-1,0,0,1,-1,-1,1,0,0,1,1,-1,1,0,0,1,1,1,1,0,0,1,-1,1,1,0,0,1,-1,-1,0,-1,0,1,-1,1,0,-1,0,-1,-1,1,0,-1,0,-1,-1,-1,0,-1,0,1,1,1,0,1,0,1,1,-1,0,1,0,-1,1,-1,0,1,0,-1,1,1,0,1,0,-1,-1,-1,0,0,-1,-1,1,-1,0,0,-1,1,1,-1,0,0,-1,1,-1,-1,0,0,-1,1,-1,1,0,
0,1,1,1,1,0,0,1,-1,1,1,0,0,1,-1,-1,1,0,0,1],[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],l.q)},t:function(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]},o:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},wa:function(a,b){var c=b[1];a[0]+=b[0];a[1]+=c},ya:function(a,b){var c=b[1];a[0]-=b[0];a[1]-=c},xa:function(a,b){a[0]*=b;a[1]*=b;a[2]*=b},k:function(a){var b=a[0],c=a[1],d=a[2];len=Math.sqrt(b*b+c*c+d*d);0!=len&&(len=
1/len,a[0]*=len,a[1]*=len,a[2]*=len)},ja:function(a){a=[a[0],a[1],a[2]];k.k(a);return a},ia:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},oa:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ta:function(a,b){var c=b[0],d=b[1],e=b[2];return[a[0]*c,a[1]*d,a[2]*e,a[3],a[4]*c,a[5]*d,a[6]*e,a[7],a[8]*c,a[9]*d,a[10]*e,a[11],a[12]*c,a[13]*d,a[14]*e,a[15]]},Y:function(a){return[a[0],0,0,0,0,a[1],0,0,0,0,a[2],0,0,0,0,1]},va:function(a){return[1,0,0,0,0,1,0,0,0,0,1,0,a[0],a[1],a[2],
1]},ra:function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);var e;e=1/(c-d);return[a/b,0,0,0,0,a,0,0,0,0,e*(c+d),-1,0,0,e*c*d*2,0]},pa:function(a,b,c){b=[a[0]-b[0],a[1]-b[1],a[2]-b[2]];if(1E-6>k.ia(b))return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];k.k(b);c=k.t(c,b);k.k(c);var d=k.t(b,c);k.k(d);return[c[0],d[0],b[0],0,c[1],d[1],b[1],0,c[2],d[2],b[2],0,-k.o(a,c),-k.o(a,d),-k.o(a,b),1]},qa:function(a,b,c,d,e,f){var n=b-a,h=c-d,g=e-f;return[-2/n,0,0,0,0,-2/h,0,0,0,0,2/g,0,-(a+b)/n,-(d+c)/h,-(e+f)/g,1]},na:function(a,
b,c,d,e,f){var n=2*e,g=1/(b-a),k=1/(d-c),l=1/(e-f);return[n*g,0,0,0,0,n*k,0,0,(a+b)*g,(d+c)*k,(f+e)*l,-1,0,0,n*f*l,0]},ua:function(a,b){var c=b[0],d=b[1],e=b[2];a[0]*=c;a[4]*=c;a[8]*=c;a[12]*=c;a[1]*=d;a[5]*=d;a[9]*=d;a[13]*=d;a[2]*=e;a[6]*=e;a[10]*=e;a[14]*=e},X:function(a,b,c){c=k.ja(c);b=b*Math.PI/180;var d=Math.cos(b),e=Math.sin(b),f=1-d,g=c[0]*f;b=c[1]*f;var f=c[2]*f,h=c[0]*e,l=c[1]*e,m=c[2]*e,e=c[0]*g+d,p=c[0]*b-m,q=c[0]*f+l,m=c[1]*g+m,r=c[1]*b+d,t=c[1]*f-h,g=c[2]*g-l;b=c[2]*b+h;c=c[2]*f+d;
return[a[0]*e+a[4]*p+a[8]*q,a[1]*e+a[5]*p+a[9]*q,a[2]*e+a[6]*p+a[10]*q,a[3]*e+a[7]*p+a[11]*q,a[0]*m+a[4]*r+a[8]*t,a[1]*m+a[5]*r+a[9]*t,a[2]*m+a[6]*r+a[10]*t,a[3]*m+a[7]*r+a[11]*t,a[0]*g+a[4]*b+a[8]*c,a[1]*g+a[5]*b+a[9]*c,a[2]*g+a[6]*b+a[10]*c,a[3]*g+a[7]*b+a[11]*c,a[12],a[13],a[14],a[15]]}};l.v=2;l.w=3;l.q=5;l.prototype.A=function(a,b,c,d){a.bindBuffer(a.ARRAY_BUFFER,b.ka);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,b.R);b=b.format;b==l.q?(a.vertexAttribPointer(c,3,a.FLOAT,!1,24,0),a.vertexAttribPointer(d,
3,a.FLOAT,!1,24,12)):b==l.v?a.vertexAttribPointer(c,2,a.FLOAT,!1,8,0):b==l.w&&a.vertexAttribPointer(c,3,a.FLOAT,!1,12,0)};l.prototype.getUniform=function(a){for(var b=0;b<this.c.length;b++)if(this.c[b][0]==a)return this.c[b].slice(1,this.c[b].length);return null};l.prototype.G=function(a,b,c,d){for(var e=0;e<this.c.length;e++)if(this.c[e][0]==a){this.c[e][1]=b;this.c[e][2]=c;this.c[e][3]=d;return}this.c.push([a,b,c,d])};l.prototype.F=function(a){for(var b=0;b<this.c.length;b++)if(this.c[b][0]==a){this.c[b][1]=
1;return}this.c.push([a,1])};l.prototype.K=function(){this.e=!1;this.d=k.Y(this.scale);this.d=k.X(this.d,this.f,this.u);this.d[12]+=this.position[0];this.d[13]+=this.position[1];this.d[14]+=this.position[2]};l.prototype.fa=function(a,b,c){this.scale=null!=a&&null==b&&null==c?[a,a,a]:[a,b,c];this.e=!0};l.prototype.da=function(a,b,c){this.position=[a,b,c];this.e=!0};l.prototype.rotate=function(a){this.f+=a;this.f%=360;this.e=!0;return this};l.prototype.ea=function(a,b){this.f=a%360;this.u=b;this.e=
!0};l.prototype.$=function(a,b,c){this.A(this.a,this.p,a,b);for(a=0;a<this.c.length;a++)b=this.c[a],4==b.length?this.a.uniform3f(b[0],b[1],b[2],b[3]):5==b.length?this.a.uniform4f(b[0],b[1],b[2],b[3],b[4]):2==b.length&&this.a.uniform1f(b[0],b[1]);null!==c&&(this.e&&this.K(),this.a.uniformMatrix4fv(c,!1,this.d));this.a.drawElements(this.a.TRIANGLES,this.p.S,this.p.type,0)};g.ha=function(a){var b=a[0]-7.5+g.b(15);360<=b?b=360-b:0>b&&(b=360+b);var c=a[1],c=15>=c?g.b(30):240<c?240+g.b(30):c-15+g.b(30),
d=a=a[2],d=15>=d?g.b(30):240<d?240+g.b(30):d+g.b(30);0<a&&0<c&&255>c&&(25>=c&&(c=25),242<=c&&(c=242));return[b,c,d]};g.b=function(a){return Math.random()*a|0};g.ba=function(a){var b=a[0],c=a[1];a=a[2];var d=b;c>d&&(d=c);a>d&&(d=a);var e=b;c<e&&(e=c);a<e&&(e=a);var f=d+e,g=f/2;if(d===e)return[0,0>g?0:255<g?255:g,0];var e=d-e,f=255*e/(127.5>=g?f:510-f),h=0,h=e/2,h=b===d?(60*(d-a)+h)/e-(60*(d-c)+h)/e:a===d?240+(60*(d-c)+h)/e-(60*(d-b)+h)/e:120+(60*(d-b)+h)/e-(60*(d-a)+h)/e;if(0>h||360<=h)h=(h%360+360)%
360;return[h,0>g?0:255<g?255:g,0>f?0:255<f?255:f]};g.n=function(a){var b=1*a[0],c=1*a[1],d=1*a[2],c=0>c?0:255<c?255:c,d=0>d?0:255<d?255:d;if(0===d)return[c,c,c];a=0;127.5>=c?a=c*(255+d)/255:(a=c*d/255,a=c+d-a);var e=2*c-a;if(0>b||360<=b)b=(b%360+360)%360;var f=b+120;360<=f&&(f-=360);c=60>f?e+(a-e)*f/60:180>f?a:240>f?e+(a-e)*(240-f)/60:e;f=b;d=60>f?e+(a-e)*f/60:180>f?a:240>f?e+(a-e)*(240-f)/60:e;f=b-120;0>f&&(f+=360);b=60>f?e+(a-e)*f/60:180>f?a:240>f?e+(a-e)*(240-f)/60:e;return[0>c?0:255<c?255:c,0>
d?0:255<d?255:d,0>b?0:255<b?255:b]};g.l=function(a){a="0"+(a|0).toString(16);return a.substring(a.length-2,a.length)};g.m=function(a){a=g.n(a);return"#"+g.l(a[0])+g.l(a[1])+g.l(a[2])};g.U=function(a){return null==a||"undefined"==typeof a?null:(a=/^\#([A-F0-9]{2})([A-F0-9]{2})([A-F0-9]{2})$/i.exec(a))?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:null};g.prototype.ca=function(a){a=this.constructor.U(a);if(!a)throw Error("invalid color parameter");this.color=a;this.h=this.constructor.ba(a);
this.P()};g.C="\nattribute vec3 position;\nattribute vec3 normal;\nuniform mat4 world;\nuniform mat4 view;\nuniform mat4 projection;\nvarying vec3 normalVar;\nvarying vec3 viewPositionVar;\nvoid main(){\nvec4 positionVec4=vec4(position,1.0);\nmat4 viewWorld=view*world;\ngl_Position=projection*viewWorld*positionVec4;\nviewPositionVar=vec3(viewWorld*positionVec4);\nnormalVar=vec3(world*vec4(normal,0.0));\n}";g.B="\nprecision mediump float;\nuniform vec3 sa;\nuniform vec3 sd;\nuniform vec3 ss;\nuniform vec3 sdir;\nuniform vec3 ma;\nuniform vec3 md;\nuniform vec3 ms;\nuniform float mshin;\nuniform vec3 color;\nuniform float alpha;\nvarying vec3 normalVar;\nvarying vec3 viewPositionVar;\nvoid main(){\n vec3 phong=(sa*ma)+(ss*ms*pow(max(dot(reflect(normalize(sdir),normalVar),\n    normalize(viewPositionVar)),0.0),mshin))+(sd*md*max(dot(normalVar,sdir),0.0));\n gl_FragColor=vec4(phong*color,alpha);\n}";
g.prototype.P=function(){document.body.style.backgroundColor=this.constructor.m(this.h);if(this.j){var a=this.constructor.n(this.h);this.c={sa:[4,4,4],sd:[2,2,2],ss:[0,0,0],sdir:[0,0,-1],ma:[.2,.2,.2],md:[1,1,1],ms:[1,1,1],mshin:[0],projection:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],view:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};var b=k.L(this.a,this.constructor.C,this.constructor.B),b=k.T(this.a,b);this.position=b.position;this.Z=b.world;this.I=b.color;this.H=b.alpha;this.J=b.normal;this.O=k.M(this.a);this.D=
b;this.count=0;k.V(this.a,a[0]/255,a[1]/255,a[2]/255,1,999999,this.a.LEQUAL);k.ga(this.a,this.D,this.c)}else this.a.fillStyle=this.constructor.m(this.h),this.a.fillRect(0,0,this.width,this.height)};g.prototype.r=function(){this.count++;4<=this.count&&(this.count=0,this.Q());this.j&&k.aa(this.a,this.i,this.position,this.J,this.Z);var a=this.r.bind(this),b=m.requestAnimationFrame||m.mozRequestAnimationFrame||m.webkitRequestAnimationFrame||m.msRequestAnimationFrame;b?b(a):m.setTimeout(a,17)};g.prototype.Q=
function(){var a=this.constructor.ha(this.h);if(this.j){300<this.i.length&&this.i.shift();var b=this.constructor.b(2E3)/1E3-1,c=this.constructor.b(2E3)/1E3-1,d=this.constructor.b(60)/60,e=(16+this.constructor.b(100))/1E3,a=this.constructor.n(a);a[0]/=255;a[1]/=255;a[2]/=255;var f=this.constructor.b(160),g=[this.constructor.b(60)/30,this.constructor.b(60)/30,0],h=new l(this.a,this.O);h.fa(e,e,e);h.ea(f,g);h.da(b,c,d);h.G(this.I,a[0],a[1],a[2]);h.F(this.H);this.i.push(h)}else b=[this.constructor.b(this.width+
30)-30,this.constructor.b(this.height+30)-30,32+this.constructor.b(200),32+this.constructor.b(200)],this.a.fillStyle=this.constructor.m(a),this.a.fillRect(b[0],b[1],b[2],b[3])};g.colorBackground=function(a){$(document).ready(function(){(new g(a)).r()})};m.CanvasBackground=g})(this);
